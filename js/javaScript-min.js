const balance=document.querySelector("#balance .rate"),plus=document.querySelector("#money-plus .rate"),minus=document.querySelector("#money-minus .rate"),list=document.querySelector("#list"),form=document.querySelector("#form"),amount=document.querySelector("#amount"),text=document.querySelector("#text"),smallContainer=document.getElementById("small-container"),border=document.querySelector(".small-container div:first-of-type"),incomeDiv=document.querySelector("#income"),expenseDiv=document.querySelector("#expense"),Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});function generateID(){return Math.floor(1e7*Math.random())}const localStorageTransactions=JSON.parse(localStorage.getItem("transactions"));function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}let transactions=null!==localStorage.getItem("transactions")?localStorageTransactions:[];function updateSmallContainer(){smallContainer.offsetHeight>140?(border.style.border="none",border.style.borderBottom="1px solid #ddd",incomeDiv.style.padding="10px 0",expenseDiv.style.padding="10px 0"):(border.style.border="none",border.style.borderRight="1px solid #ddd")}function addTransaction(e){if(e.preventDefault(),""===text.value.trim()||""===amount.value.trim())Toast.fire({icon:"error",title:"Please enter both text and amount."});else{const e={id:generateID(),text:text.value,amount:+amount.value};transactions.push(e),addTransactionDOM(e),update(),updateLocalStorage(),text.value="",amount.value=""}}function addTransactionDOM(e){const t=e.amount<0?"minus":"plus",n=document.createElement("li");n.classList.add(t);let a=numberWithCommas(Math.abs(e.amount));n.innerHTML=`\n    ${e.text} <span>${a}</span> <button class="del-btn" onclick= "removeTrans(${e.id})">x</button>  \n      `,list.appendChild(n)}function update(){const e=transactions.map(e=>e.amount);balance_amount=e.reduce((e,t)=>e+=t,0).toFixed(2);const t=e.filter(e=>e>0).reduce((e,t)=>e+=t,0).toFixed(2),n=(parseFloat(t)-parseFloat(balance_amount)).toFixed(2);parseFloat(balance_amount)<0?document.querySelector("#balance").classList.add("balance-color"):document.querySelector("#balance").classList.remove("balance-color"),""===list.innerHTML?document.querySelector(".history").classList.add("history-remove"):document.querySelector(".history").classList.remove("history-remove"),balance.innerText=""+numberWithCommas(balance_amount),plus.innerText=""+numberWithCommas(t),minus.innerText=""+numberWithCommas(n)}function removeTrans(e){transactions=transactions.filter(t=>t.id!==e),updateLocalStorage(),init()}function updateLocalStorage(){localStorage.setItem("transactions",JSON.stringify(transactions)),updateSmallContainer()}function init(){list.innerHTML="",transactions.forEach(addTransactionDOM),update(),updateSmallContainer()}init(),form.addEventListener("submit",addTransaction);